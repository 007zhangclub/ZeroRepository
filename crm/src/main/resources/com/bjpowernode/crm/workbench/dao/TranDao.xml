<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.bjpowernode.crm.workbench.dao.TranDao">


    <insert id="insert">
        insert into tbl_tran
        (id,
         owner,
         money,
         name,
         expectedDate,
         customerId,
         stage,
         type,
         source,
         activityId,
         contactsId,
         createBy,
         createTime,
         editBy,
         editTime,
         description,
         contactSummary,
         nextContactTime)
        values (#{id},
                #{owner},
                #{money},
                #{name},
                #{expectedDate},
                #{customerId},
                #{stage},
                #{type},
                #{source},
                #{activityId},
                #{contactsId},
                #{createBy},
                #{createTime},
                #{editBy},
                #{editTime},
                #{description},
                #{contactSummary},
                #{nextContactTime})
    </insert>
    <select id="findById" resultType="com.bjpowernode.crm.workbench.domain.Tran">
        select
               t.*,a.name as activityName,u.name as username,co.fullname as contactsName,cu.name as customerName
        from tbl_tran t
        left join tbl_activity a on t.activityId = a.id
        left join tbl_user u on t.owner = u.id
        left join tbl_contacts co on t.contactsId = co.id
        left join tbl_customer cu on t.customerId = cu.id
        where t.id = #{id}
    </select>
</mapper>

































